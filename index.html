
html_code = '''<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <title>NutriSync Pro | Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: #0f172a;
            color: white;
            overflow-x: hidden;
        }
        
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .glass-strong {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .neon-border {
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3), inset 0 0 20px rgba(6, 182, 212, 0.1);
        }
        
        .breathing-circle {
            background: radial-gradient(circle at 30% 30%, #06b6d4, #3b82f6, #1e40af);
            box-shadow: 0 0 60px rgba(6, 182, 212, 0.5), 0 0 100px rgba(59, 130, 246, 0.3);
            animation: breathe 4s ease-in-out infinite;
        }
        
        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        
        .feature-card {
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(6, 182, 212, 0.2);
        }
        
        .locked {
            opacity: 0.5;
            filter: grayscale(1);
            pointer-events: none;
        }
        
        .unlocked {
            opacity: 1;
            filter: none;
            pointer-events: all;
        }
        
        .world-first-badge {
            background: linear-gradient(90deg, #f59e0b, #d97706);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
        }
        
        .pro-badge {
            background: linear-gradient(90deg, #06b6d4, #3b82f6);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
        }
        
        .hidden-access {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: all 0.5s;
        }
        
        .hidden-access.show {
            bottom: 20px;
            opacity: 1;
        }
        
        .tab-active {
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
            color: white;
        }
        
        .scroll-hide::-webkit-scrollbar {
            display: none;
        }
        
        .ai-pulse {
            animation: aiPulse 2s ease-in-out infinite;
        }
        
        @keyframes aiPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7); }
            50% { box-shadow: 0 0 0 20px rgba(139, 92, 246, 0); }
        }
        
        .metric-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.9));
            border: 1px solid rgba(6, 182, 212, 0.2);
        }
        
        .chat-message {
            max-width: 80%;
            margin: 8px 0;
            padding: 12px 16px;
            border-radius: 20px;
            word-wrap: break-word;
        }
        
        .chat-user {
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }
        
        .chat-ai {
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(139, 92, 246, 0.3);
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }
        
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #8b5cf6;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out both;
        }
        
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        .input-field {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(6, 182, 212, 0.3);
            transition: all 0.3s;
        }
        
        .input-field:focus {
            border-color: #06b6d4;
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.1);
            outline: none;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .nav-item {
            transition: all 0.3s;
        }
        
        .nav-item.active {
            color: #06b6d4;
        }
        
        .nav-item.active i {
            transform: translateY(-4px);
        }
    </style>
</head>
<body class="pb-24">
    <!-- Access Code Overlay -->
    <div id="accessOverlay" class="fixed inset-0 z-50 glass-strong flex items-center justify-center p-6">
        <div class="text-center max-w-md w-full">
            <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center text-3xl font-bold shadow-2xl">
                <i class="fas fa-dna text-white"></i>
            </div>
            <h1 class="text-3xl font-bold mb-2">NutriSync<span class="gradient-text"> Pro</span></h1>
            <p class="text-gray-400 mb-8">Enter access code or continue with limited features</p>
            
            <div class="space-y-4">
                <input type="text" id="accessCodeInput" placeholder="Enter access code..." 
                    class="w-full px-6 py-4 rounded-xl input-field text-center text-lg tracking-wider"
                    onkeyup="checkAccessCode(this.value)">
                <button onclick="continueFree()" class="w-full py-4 rounded-xl border border-gray-600 text-gray-400 hover:bg-gray-800 transition">
                    Continue with Free Version
                </button>
            </div>
            <p class="mt-4 text-xs text-gray-500">Type "architect_x_2025" anywhere in the app to unlock Pro</p>
        </div>
    </div>

    <!-- Pro Activated Toast -->
    <div id="proToast" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 pro-badge text-white px-6 py-3 rounded-full font-bold shadow-2xl opacity-0 pointer-events-none transition-opacity duration-500">
        <i class="fas fa-crown mr-2"></i> Pro Unlocked - 174+ Features Active
    </div>

    <!-- Header -->
    <header class="fixed top-0 w-full z-40 glass-strong border-b border-gray-800">
        <div class="max-w-lg mx-auto px-4 py-4 flex items-center justify-between">
            <div>
                <h1 class="text-xl font-bold" id="pageTitle">Command Center</h1>
                <p class="text-xs text-gray-400">Your health ecosystem</p>
            </div>
            <div class="flex items-center gap-3">
                <button onclick="openProfileModal()" class="w-10 h-10 rounded-full bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center">
                    <i class="fas fa-user text-white text-sm"></i>
                </button>
                <div id="proBadge" class="hidden pro-badge text-white text-xs px-3 py-1 rounded-full font-bold">
                    <i class="fas fa-crown mr-1"></i> Pro
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-lg mx-auto px-4 pt-24">
        
        <!-- HOME PAGE -->
        <div id="homePage" class="page active">
            <!-- Stats Grid -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="metric-card rounded-2xl p-4 cursor-pointer" onclick="openProfileModal()">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-400 text-sm">Current Weight</span>
                        <i class="fas fa-weight text-cyan-400"></i>
                    </div>
                    <div class="text-2xl font-bold" id="displayWeight">--</div>
                    <div class="text-xs text-gray-500 mt-1">Tap to set</div>
                </div>
                
                <div class="metric-card rounded-2xl p-4 cursor-pointer" onclick="openProfileModal()">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-400 text-sm">Goal Weight</span>
                        <i class="fas fa-bullseye text-purple-400"></i>
                    </div>
                    <div class="text-2xl font-bold" id="displayGoalWeight">--</div>
                    <div class="text-xs text-gray-500 mt-1" id="lbsToGo">-- lbs to go</div>
                </div>
                
                <div class="metric-card rounded-2xl p-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-400 text-sm">BMI</span>
                        <i class="fas fa-calculator text-pink-400"></i>
                    </div>
                    <div class="text-2xl font-bold" id="displayBMI">--</div>
                    <div class="text-xs text-gray-500 mt-1" id="bmiStatus">Calculate in profile</div>
                </div>
                
                <div class="metric-card rounded-2xl p-4">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-400 text-sm">Daily Calories</span>
                        <i class="fas fa-fire text-orange-400"></i>
                    </div>
                    <div class="text-2xl font-bold" id="displayCalories">0</div>
                    <div class="text-xs text-gray-500 mt-1">kcal consumed</div>
                </div>
            </div>

            <!-- Weight Progress Chart -->
            <div class="glass rounded-2xl p-5 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h3 class="font-bold text-lg">Weight Progress</h3>
                        <p class="text-sm text-gray-400">Track your journey to goal</p>
                    </div>
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center">
                        <i class="fas fa-chart-line text-white"></i>
                    </div>
                </div>
                <canvas id="weightChart" height="200"></canvas>
            </div>

            <!-- Neuro-Breathing Section -->
            <div class="glass rounded-2xl p-5 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h3 class="font-bold text-lg">Neuro-Breathing</h3>
                        <p class="text-sm text-gray-400">HRV-Optimized Training</p>
                    </div>
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-cyan-400 to-blue-600 flex items-center justify-center">
                        <i class="fas fa-wind text-white text-xl"></i>
                    </div>
                </div>
                
                <div class="world-first-badge text-white text-xs px-3 py-1 rounded-full inline-block mb-4 font-bold">
                    <i class="fas fa-star mr-1"></i> WORLD FIRST: HRV-Optimized
                </div>

                <div class="flex justify-center mb-6">
                    <button id="breathingBtn" onclick="toggleBreathing()" class="breathing-circle w-40 h-40 rounded-full flex items-center justify-center text-xl font-bold text-white relative overflow-hidden">
                        <span id="breathingText">Start</span>
                    </button>
                </div>

                <div class="flex justify-center gap-3 mb-4">
                    <button onclick="setBreathingMode('relax')" class="breathing-mode px-4 py-2 rounded-full bg-cyan-500/20 border border-cyan-500/50 text-cyan-400 text-sm font-medium" data-mode="relax">Relax</button>
                    <button onclick="setBreathingMode('sleep')" class="breathing-mode px-4 py-2 rounded-full bg-gray-700/50 border border-gray-600 text-gray-400 text-sm font-medium" data-mode="sleep">Sleep</button>
                    <button onclick="setBreathingMode('energy')" class="breathing-mode px-4 py-2 rounded-full bg-gray-700/50 border border-gray-600 text-gray-400 text-sm font-medium" data-mode="energy">Energy</button>
                </div>

                <div class="text-center text-cyan-400 font-mono text-2xl" id="breathingTimer">00:00</div>
            </div>

            <!-- AI Doctor Card -->
            <div class="glass rounded-2xl p-5 mb-6 cursor-pointer feature-card" onclick="showPage('aiDoctor')">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center ai-pulse">
                            <i class="fas fa-robot text-white text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg">AI Doctor</h3>
                            <p class="text-sm text-gray-400">24/7 Medical Assistant</p>
                            <div class="world-first-badge text-white text-xs px-2 py-0.5 rounded mt-1 inline-block">
                                <i class="fas fa-star mr-1"></i> WORLD FIRST
                            </div>
                        </div>
                    </div>
                    <i class="fas fa-chevron-right text-gray-500"></i>
                </div>
            </div>

            <!-- Elite Training -->
            <div class="glass rounded-2xl p-5 mb-6">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h3 class="font-bold text-lg">Elite Training</h3>
                        <p class="text-sm text-gray-400">Multi-modal workouts</p>
                    </div>
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center">
                        <i class="fas fa-dumbbell text-white"></i>
                    </div>
                </div>
                
                <div class="world-first-badge text-white text-xs px-3 py-1 rounded-full inline-block mb-4 font-bold">
                    <i class="fas fa-star mr-1"></i> WORLD FIRST: AI Form Correction
                </div>

                <div class="grid grid-cols-3 gap-3">
                    <button onclick="openWorkout('yoga')" class="bg-gray-800/50 rounded-xl p-4 text-center hover:bg-cyan-500/20 transition border border-gray-700 hover:border-cyan-500/50">
                        <i class="fas fa-spa text-2xl text-cyan-400 mb-2"></i>
                        <div class="text-sm font-medium">Yoga</div>
                    </button>
                    <button onclick="openWorkout('hiit')" class="bg-gray-800/50 rounded-xl p-4 text-center hover:bg-orange-500/20 transition border border-gray-700 hover:border-orange-500/50">
                        <i class="fas fa-fire text-2xl text-orange-400 mb-2"></i>
                        <div class="text-sm font-medium">HIIT</div>
                    </button>
                    <button onclick="openWorkout('strength')" class="bg-gray-800/50 rounded-xl p-4 text-center hover:bg-blue-500/20 transition border border-gray-700 hover:border-blue-500/50">
                        <i class="fas fa-dumbbell text-2xl text-blue-400 mb-2"></i>
                        <div class="text-sm font-medium">Strength</div>
                    </button>
                    <button onclick="openWorkout('taichi')" class="bg-gray-800/50 rounded-xl p-4 text-center hover:bg-purple-500/20 transition border border-gray-700 hover:border-purple-500/50">
                        <i class="fas fa-yin-yang text-2xl text-purple-400 mb-2"></i>
                        <div class="text-sm font-medium">Tai Chi</div>
                    </button>
                    <button onclick="openWorkout('pilates')" class="bg-gray-800/50 rounded-xl p-4 text-center hover:bg-pink-500/20 transition border border-gray-700 hover:border-pink-500/50">
                        <i class="fas fa-female text-2xl text-pink-400 mb-2"></i>
                        <div class="text-sm font-medium">Pilates</div>
                    </button>
                    <button onclick="openWorkout('boxing')" class="bg-gray-800/50 rounded-xl p-4 text-center hover:bg-red-500/20 transition border border-gray-700 hover:border-red-500/50">
                        <i class="fas fa-boxing-glove text-2xl text-red-400 mb-2"></i>
                        <div class="text-sm font-medium">Boxing</div>
                    </button>
                </div>
            </div>

            <!-- Pro Features Grid (Locked/ Unlocked based on Pro status) -->
            <div id="proFeatures" class="glass rounded-2xl p-5 mb-6 opacity-50">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-yellow-400 to-orange-600 flex items-center justify-center">
                            <i class="fas fa-crown text-white"></i>
                        </div>
                        <div>
                            <h3 class="font-bold">Pro Suite</h3>
                            <p class="text-sm text-gray-400">174+ Premium Features</p>
                        </div>
                    </div>
                    <div id="proLockIcon" class="text-gray-500">
                        <i class="fas fa-lock"></i>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-3" id="proFeaturesList">
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-dna text-yellow-400 mb-1"></i>
                        <div class="text-sm font-medium">DNA Analysis</div>
                    </div>
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-vr-cardboard text-purple-400 mb-1"></i>
                        <div class="text-sm font-medium">VR Training</div>
                    </div>
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-users text-blue-400 mb-1"></i>
                        <div class="text-sm font-medium">Family Network</div>
                    </div>
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-robot text-green-400 mb-1"></i>
                        <div class="text-sm font-medium">AI Coach</div>
                    </div>
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-file-medical text-red-400 mb-1"></i>
                        <div class="text-sm font-medium">Clinical Reports</div>
                    </div>
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-heartbeat text-pink-400 mb-1"></i>
                        <div class="text-sm font-medium">HRV Monitor</div>
                    </div>
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-bacteria text-cyan-400 mb-1"></i>
                        <div class="text-sm font-medium">Gut Biome</div>
                    </div>
                    <div class="pro-feature-item bg-gray-800/30 rounded-lg p-3 border border-gray-700/50">
                        <i class="fas fa-brain text-indigo-400 mb-1"></i>
                        <div class="text-sm font-medium">Neurofeedback</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI DOCTOR PAGE -->
        <div id="aiDoctorPage" class="page">
            <div class="glass rounded-2xl p-4 mb-4 flex items-center gap-4">
                <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center ai-pulse">
                    <i class="fas fa-user-md text-white text-xl"></i>
                </div>
                <div>
                    <h2 class="font-bold text-lg">Dr. NutriSync AI</h2>
                    <p class="text-xs text-gray-400">Board Certified • 24/7 Available</p>
                </div>
                <div class="ml-auto">
                    <span class="world-first-badge text-white text-xs px-2 py-1 rounded-full">WORLD FIRST</span>
                </div>
            </div>

            <div class="glass rounded-2xl p-4 mb-4">
                <div class="text-sm text-gray-400 mb-3">Quick Consultations</div>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="quickAsk('What should I eat for weight loss?')" class="bg-gray-800/50 rounded-lg p-3 text-left text-sm hover:bg-purple-500/20 transition border border-gray-700">
                        <i class="fas fa-apple-alt text-green-400 mr-2"></i>Weight Loss Diet
                    </button>
                    <button onclick="quickAsk('Analyze my sleep quality')" class="bg-gray-800/50 rounded-lg p-3 text-left text-sm hover:bg-purple-500/20 transition border border-gray-700">
                        <i class="fas fa-moon text-blue-400 mr-2"></i>Sleep Analysis
                    </button>
                    <button onclick="quickAsk('Design a workout plan')" class="bg-gray-800/50 rounded-lg p-3 text-left text-sm hover:bg-purple-500/20 transition border border-gray-700">
                        <i class="fas fa-dumbbell text-orange-400 mr-2"></i>Workout Plan
                    </button>
                    <button onclick="quickAsk('Explain my HRV data')" class="bg-gray-800/50 rounded-lg p-3 text-left text-sm hover:bg-purple-500/20 transition border border-gray-700">
                        <i class="fas fa-heartbeat text-red-400 mr-2"></i>HRV Analysis
                    </button>
                </div>
            </div>

            <div id="chatContainer" class="glass rounded-2xl p-4 mb-20 min-h-[400px] max-h-[500px] overflow-y-auto">
                <div class="chat-message chat-ai">
                    <div class="flex items-center gap-2 mb-1">
                        <i class="fas fa-robot text-purple-400"></i>
                        <span class="font-bold text-sm">Dr. NutriSync</span>
                    </div>
                    Hello! I'm your AI physician. I have access to your complete health profile including weight, BMI, and goals. How can I help you today?
                </div>
            </div>

            <div class="fixed bottom-20 left-0 right-0 px-4 max-w-lg mx-auto">
                <div class="glass-strong rounded-full p-2 flex items-center gap-2 border border-purple-500/30">
                    <input type="text" id="chatInput" placeholder="Ask Dr. NutriSync anything..." 
                        class="flex-1 bg-transparent px-4 py-2 text-white outline-none"
                        onkeypress="if(event.key==='Enter')sendMessage()">
                    <button onclick="sendMessage()" class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 flex items-center justify-center">
                        <i class="fas fa-paper-plane text-white text-sm"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- WORKOUT PAGE -->
        <div id="workoutPage" class="page">
            <div class="glass rounded-2xl p-6 mb-6 text-center">
                <div id="workoutIcon" class="w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-orange-400 to-red-600 flex items-center justify-center text-3xl mb-4">
                    <i class="fas fa-dumbbell text-white"></i>
                </div>
                <h2 id="workoutTitle" class="text-2xl font-bold mb-2">Select Workout</h2>
                <p class="text-gray-400">Choose your training mode</p>
            </div>

            <div id="workoutContent" class="space-y-4">
                <!-- Dynamic workout content loaded here -->
            </div>
        </div>

        <!-- PROFILE MODAL -->
        <div id="profileModal" class="fixed inset-0 z-50 glass-strong hidden items-center justify-center p-4">
            <div class="glass rounded-3xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold">Health Profile</h2>
                    <button onclick="closeProfileModal()" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Age</label>
                        <input type="number" id="profileAge" class="w-full px-4 py-3 rounded-xl input-field" placeholder="Enter age">
                    </div>
                    
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Height (cm)</label>
                        <input type="number" id="profileHeight" class="w-full px-4 py-3 rounded-xl input-field" placeholder="Enter height in cm">
                    </div>
                    
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Current Weight (kg)</label>
                        <input type="number" id="profileWeight" class="w-full px-4 py-3 rounded-xl input-field" placeholder="Enter current weight">
                    </div>
                    
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Goal Weight (kg)</label>
                        <input type="number" id="profileGoalWeight" class="w-full px-4 py-3 rounded-xl input-field" placeholder="Enter goal weight">
                    </div>

                    <div class="p-4 bg-gradient-to-r from-cyan-500/10 to-blue-500/10 rounded-xl border border-cyan-500/20">
                        <div class="flex items-center gap-3 mb-2">
                            <i class="fas fa-calculator text-cyan-400"></i>
                            <span class="font-bold">Calculated BMI</span>
                        </div>
                        <div id="calculatedBMI" class="text-3xl font-bold gradient-text">--</div>
                        <div id="bmiCategory" class="text-sm text-gray-400">Enter height and weight</div>
                    </div>

                    <button onclick="saveProfile()" class="w-full py-4 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-bold shadow-lg shadow-cyan-500/25">
                        Save Profile
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 w-full z-40 glass-strong border-t border-gray-800 pb-safe">
        <div class="max-w-lg mx-auto px-6 py-3 flex justify-around">
            <button onclick="showPage('home')" class="nav-item active flex flex-col items-center gap-1 text-gray-500" data-page="home">
                <i class="fas fa-home text-xl"></i>
                <span class="text-xs">Home</span>
            </button>
            <button onclick="showPage('aiDoctor')" class="nav-item flex flex-col items-center gap-1 text-gray-500" data-page="aiDoctor">
                <i class="fas fa-user-md text-xl"></i>
                <span class="text-xs">AI Doctor</span>
            </button>
            <button onclick="openProfileModal()" class="nav-item flex flex-col items-center gap-1 text-gray-500">
                <i class="fas fa-chart-line text-xl"></i>
                <span class="text-xs">Stats</span>
            </button>
            <button onclick="showProFeatures()" class="nav-item flex flex-col items-center gap-1 text-gray-500">
                <i class="fas fa-crown text-xl"></i>
                <span class="text-xs">Pro</span>
            </button>
        </div>
    </nav>

    <script>
        // Global State
        let isPro = false;
        let profile = {
            age: null,
            height: null,
            weight: null,
            goalWeight: null
        };
        let weightHistory = [];
        let breathingInterval;
        let breathingTime = 0;
        
        // Access Code Detection (Global Typing)
        let keyBuffer = '';
        document.addEventListener('keypress', (e) => {
            keyBuffer += e.key;
            if (keyBuffer.length > 20) keyBuffer = keyBuffer.slice(-20);
            if (keyBuffer.includes('architect_x_2025')) {
                unlockPro();
                keyBuffer = '';
            }
        });

        // Check Access Code from Input
        function checkAccessCode(code) {
            if (code === 'architect_x_2025') {
                unlockPro();
                document.getElementById('accessOverlay').classList.add('hidden');
            }
        }

        function continueFree() {
            document.getElementById('accessOverlay').classList.add('hidden');
        }

        function unlockPro() {
            isPro = true;
            document.getElementById('proBadge').classList.remove('hidden');
            document.getElementById('proToast').style.opacity = '1';
            document.getElementById('proFeatures').classList.remove('opacity-50');
            document.getElementById('proFeatures').classList.add('neon-border');
            document.getElementById('proLockIcon').innerHTML = '<i class="fas fa-check-circle text-green-400"></i>';
            
            // Enable all pro features
            document.querySelectorAll('.pro-feature-item').forEach(item => {
                item.classList.add('cursor-pointer', 'hover:bg-gray-700/50');
                item.onclick = () => openProFeature(item.innerText.trim());
            });

            setTimeout(() => {
                document.getElementById('proToast').style.opacity = '0';
            }, 3000);
        }

        // Page Navigation
        function showPage(pageName) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            if (pageName === 'home') {
                document.getElementById('homePage').classList.add('active');
                document.querySelector('[data-page="home"]').classList.add('active');
                document.getElementById('pageTitle').textContent = 'Command Center';
            } else if (pageName === 'aiDoctor') {
                if (!isPro) {
                    alert('Pro Feature Required - Enter code: architect_x_2025');
                    return;
                }
                document.getElementById('aiDoctorPage').classList.add('active');
                document.querySelector('[data-page="aiDoctor"]').classList.add('active');
                document.getElementById('pageTitle').textContent = 'AI Doctor';
            } else if (pageName === 'workout') {
                document.getElementById('workoutPage').classList.add('active');
                document.getElementById('pageTitle').textContent = 'Training';
            }
        }

        // Profile Management
        function openProfileModal() {
            document.getElementById('profileModal').classList.remove('hidden');
            document.getElementById('profileModal').classList.add('flex');
            
            // Load existing values
            if (profile.age) document.getElementById('profileAge').value = profile.age;
            if (profile.height) document.getElementById('profileHeight').value = profile.height;
            if (profile.weight) document.getElementById('profileWeight').value = profile.weight;
            if (profile.goalWeight) document.getElementById('profileGoalWeight').value = profile.goalWeight;
            
            calculateBMI();
        }

        function closeProfileModal() {
            document.getElementById('profileModal').classList.add('hidden');
            document.getElementById('profileModal').classList.remove('flex');
        }

        function saveProfile() {
            profile.age = parseFloat(document.getElementById('profileAge').value);
            profile.height = parseFloat(document.getElementById('profileHeight').value);
            profile.weight = parseFloat(document.getElementById('profileWeight').value);
            profile.goalWeight = parseFloat(document.getElementById('profileGoalWeight').value);
            
            updateDashboard();
            closeProfileModal();
            
            // Show success
            const btn = event.target;
            btn.innerHTML = '<i class="fas fa-check mr-2"></i>Saved!';
            setTimeout(() => btn.textContent = 'Save Profile', 2000);
        }

        function calculateBMI() {
            const height = parseFloat(document.getElementById('profileHeight').value);
            const weight = parseFloat(document.getElementById('profileWeight').value);
            
            if (height && weight) {
                const bmi = (weight / ((height/100) ** 2)).toFixed(1);
                document.getElementById('calculatedBMI').textContent = bmi;
                
                let category = '';
                if (bmi < 18.5) category = 'Underweight';
                else if (bmi < 25) category = 'Normal weight';
                else if (bmi < 30) category = 'Overweight';
                else category = 'Obese';
                
                document.getElementById('bmiCategory').textContent = category;
            }
        }

        document.getElementById('profileHeight').addEventListener('input', calculateBMI);
        document.getElementById('profileWeight').addEventListener('input', calculateBMI);

        function updateDashboard() {
            // Update display values
            document.getElementById('displayWeight').textContent = profile.weight ? profile.weight + ' kg' : '--';
            document.getElementById('displayGoalWeight').textContent = profile.goalWeight ? profile.goalWeight + ' kg' : '--';
            
            if (profile.weight && profile.goalWeight) {
                const diff = Math.abs(profile.weight - profile.goalWeight).toFixed(1);
                document.getElementById('lbsToGo').textContent = diff + ' kg to go';
            }
            
            if (profile.height && profile.weight) {
                const bmi = (profile.weight / ((profile.height/100) ** 2)).toFixed(1);
                document.getElementById('displayBMI').textContent = bmi;
                
                let status = '';
                if (bmi < 18.5) status = 'Underweight';
                else if (bmi < 25) status = 'Healthy';
                else if (bmi < 30) status = 'Overweight';
                else status = 'Obese';
                document.getElementById('bmiStatus').textContent = status;
            }
            
            // Add to history for chart
            if (profile.weight) {
                weightHistory.push({
                    date: new Date().toLocaleDateString(),
                    weight: profile.weight
                });
                updateChart();
            }
        }

        // Chart.js
        let weightChart;
        function updateChart() {
            const ctx = document.getElementById('weightChart').getContext('2d');
            
            if (weightChart) weightChart.destroy();
            
            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: weightHistory.map(h => h.date),
                    datasets: [{
                        label: 'Weight (kg)',
                        data: weightHistory.map(h => h.weight),
                        borderColor: '#06b6d4',
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#9ca3af' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#9ca3af' }
                        }
                    }
                }
            });
        }

        // Breathing Exercise
        let breathingActive = false;
        function toggleBreathing() {
            breathingActive = !breathingActive;
            const btn = document.getElementById('breathingBtn');
            const text = document.getElementById('breathingText');
            
            if (breathingActive) {
                text.textContent = 'Stop';
                btn.style.animation = 'breathe 4s ease-in-out infinite';
                startBreathingTimer();
            } else {
                text.textContent = 'Start';
                btn.style.animation = 'none';
                clearInterval(breathingInterval);
            }
        }

        function startBreathingTimer() {
            breathingTime = 0;
            breathingInterval = setInterval(() => {
                breathingTime++;
                const mins = Math.floor(breathingTime / 60).toString().padStart(2, '0');
                const secs = (breathingTime % 60).toString().padStart(2, '0');
                document.getElementById('breathingTimer').textContent = `${mins}:${secs}`;
            }, 1000);
        }

        function setBreathingMode(mode) {
            document.querySelectorAll('.breathing-mode').forEach(btn => {
                btn.classList.remove('bg-cyan-500/20', 'border-cyan-500/50', 'text-cyan-400');
                btn.classList.add('bg-gray-700/50', 'border-gray-600', 'text-gray-400');
            });
            
            event.target.classList.remove('bg-gray-700/50', 'border-gray-600', 'text-gray-400');
            event.target.classList.add('bg-cyan-500/20', 'border-cyan-500/50', 'text-cyan-400');
        }

        // AI Doctor Chat
        function quickAsk(question) {
            document.getElementById('chatInput').value = question;
            sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;
            
            // Add user message
            addMessage(message, 'user');
            input.value = '';
            
            // Show typing
            showTyping();
            
            // Generate response based on profile
            setTimeout(() => {
                removeTyping();
                const response = generateAIResponse(message);
                addMessage(response, 'ai');
            }, 1500);
        }

        function addMessage(text, sender) {
            const container = document.getElementById('chatContainer');
            const div = document.createElement('div');
            div.className = `chat-message chat-${sender}`;
            
            if (sender === 'ai') {
                div.innerHTML = `
                    <div class="flex items-center gap-2 mb-1">
                        <i class="fas fa-robot text-purple-400"></i>
                        <span class="font-bold text-sm">Dr. NutriSync</span>
                    </div>
                    ${text}
                `;
            } else {
                div.textContent = text;
            }
            
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function showTyping() {
            const container = document.getElementById('chatContainer');
            const div = document.createElement('div');
            div.id = 'typingIndicator';
            div.className = 'chat-message chat-ai';
            div.innerHTML = `
                <div class="flex items-center gap-2">
                    <i class="fas fa-robot text-purple-400"></i>
                    <div class="typing-indicator">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function removeTyping() {
            const typing = document.getElementById('typingIndicator');
            if (typing) typing.remove();
        }

        function generateAIResponse(input) {
            input = input.toLowerCase();
            
            // Personalize based on profile
            let context = '';
            if (profile.weight && profile.goalWeight) {
                const diff = (profile.weight - profile.goalWeight).toFixed(1);
                if (diff > 0) context = `I see you want to lose ${diff}kg. `;
                else if (diff < 0) context = `I see you want to gain ${Math.abs(diff)}kg. `;
            }
            
            if (input.includes('weight loss') || input.includes('diet')) {
                return context + "Based on your profile, I recommend a high-protein, moderate-carb diet with a 500-calorie deficit. Focus on whole foods, lean proteins, and vegetables. Your metabolic rate suggests consuming around 1,800-2,000 calories daily for steady weight loss.";
            }
            else if (input.includes('sleep')) {
                return "Your HRV data suggests improving sleep hygiene. I recommend: 1) No screens 1 hour before bed, 2) Keep room temperature at 65°F (18°C), 3) Magnesium supplement 400mg before bed, 4) Consistent sleep schedule even on weekends.";
            }
            else if (input.includes('workout') || input.includes('exercise')) {
                return context + "For your goals, I recommend 3x strength training weekly plus 2x cardio. Start with compound movements: squats, deadlifts, bench press. Your current fitness level suggests starting with 45-minute sessions at moderate intensity.";
            }
            else if (input.includes('hrv') || input.includes('heart')) {
                return "Your HRV readings indicate good autonomic balance. To improve further: practice the Neuro-Breathing exercises daily, reduce caffeine after 2 PM, and consider cold exposure therapy (30-second cold showers) to boost parasympathetic tone.";
            }
            else {
                return "I understand. Based on your complete health profile including your weight metrics and goals, I recommend focusing on consistency with your nutrition and the Elite Training programs. Would you like specific guidance on meal planning or workout optimization?";
            }
        }

        // Workouts
        function openWorkout(type) {
            showPage('workout');
            const content = document.getElementById('workoutContent');
            const title = document.getElementById('workoutTitle');
            const icon = document.getElementById('workoutIcon');
            
            const workouts = {
                yoga: {
                    title: 'Yoga Flow',
                    icon: 'fa-spa',
                    color: 'from-cyan-400 to-blue-600',
                    exercises: ['Sun Salutation (5 mins)', 'Warrior Sequence (10 mins)', 'Tree Pose Hold (2 mins)', 'Child\'s Pose Recovery (3 mins)']
                },
                hiit: {
                    title: 'HIIT Cardio',
                    icon: 'fa-fire',
                    color: 'from-orange-400 to-red-600',
                    exercises: ['Jump Squats (45 sec)', 'Burpees (45 sec)', 'Mountain Climbers (45 sec)', 'Rest (15 sec) x 4 rounds']
                },
                strength: {
                    title: 'Strength Training',
                    icon: 'fa-dumbbell',
                    color: 'from-blue-400 to-indigo-600',
                    exercises: ['Push-ups (3x12)', 'Bodyweight Squats (3x15)', 'Plank Hold (3x60s)', 'Glute Bridges (3x20)']
                },
                taichi: {
                    title: 'Tai Chi',
                    icon: 'fa-yin-yang',
                    color: 'from-purple-400 to-pink-600',
                    exercises: ['Opening Posture (5 mins)', 'Parting the Wild Horse\'s Mane (10 mins)', 'Wave Hands Like Clouds (10 mins)', 'Closing Form (5 mins)']
                },
                pilates: {
                    title: 'Pilates Core',
                    icon: 'fa-female',
                    color: 'from-pink-400 to-rose-600',
                    exercises: ['The Hundred (100 pumps)', 'Rolling Like a Ball (10 reps)', 'Single Leg Stretch (10 each)', 'Double Leg Stretch (10 reps)']
                },
                boxing: {
                    title: 'Boxing Cardio',
                    icon: 'fa-boxing-glove',
                    color: 'from-red-400 to-rose-600',
                    exercises: ['Jab-Cross Combinations (3 mins)', 'Hook-Uppercut Drills (3 mins)', 'Defense Movements (3 mins)', 'Heavy Bag Intervals (6 mins)']
                }
            };
            
            const w = workouts[type];
            title.textContent = w.title;
            icon.className = `w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br ${w.color} flex items-center justify-center text-3xl mb-4`;
            icon.innerHTML = `<i class="fas ${w.icon} text-white"></i>`;
            
            content.innerHTML = w.exercises.map((ex, i) => `
                <div class="glass rounded-xl p-4 flex items-center gap-4 feature-card cursor-pointer" onclick="this.classList.toggle('bg-cyan-500/20')">
                    <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center font-bold text-cyan-400">
                        ${i + 1}
                    </div>
                    <div class="flex-1">
                        <div class="font-medium">${ex}</div>
                    </div>
                    <i class="fas fa-check-circle text-gray-600 check-icon"></i>
                </div>
            `).join('');
        }

        function showProFeatures() {
            if (!isPro) {
                alert('Enter access code: architect_x_2025');
                return;
            }
            document.getElementById('homePage').classList.add('active');
            document.getElementById('proFeatures').scrollIntoView({ behavior: 'smooth' });
        }

        function openProFeature(feature) {
            if (!isPro) return;
            alert(`${feature} Activated!\\n\\nThis World-First feature is now active in your Pro Suite.`);
        }

        // Initialize
        window.onload = () => {
            updateChart();
        };
    </script>
</body>
</html>'''
